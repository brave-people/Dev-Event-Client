"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{5334:function(e,t,n){var r=n(5893),o=n(7294),a=n(1163),u=n(3447),c=n(1407),i=n(4184),s=n.n(i),l=n(2804),f=n(5825),d=n(7049);t.Z=function(e){var t=e.user,n=(0,a.useRouter)(),i=(0,l.Zl)(f.U),h=(0,d.K)(null===t||void 0===t?void 0:t.roles),p=function(){"undefined"!==typeof t&&i(t),n.push("/auth/modify")};return(0,r.jsxs)("header",{className:"admin__header",children:[(0,r.jsx)("a",{href:"/admin/event",className:"text-4xl font-bold",children:"\uc6a9\uac10\ud55c \uad00\ub9ac\uc790"}),(0,r.jsxs)(u.v,{as:"div",className:"ml-3 relative",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(u.v.Button,{className:"flex p-2 items-center bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"#DEE1E5",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),t&&(0,r.jsx)("p",{className:"ml-1 mr-3 font-bold text-gray-600",children:t.name}),(0,r.jsx)("svg",{className:"w-5 h-6",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fill:"#687A92",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})}),(0,r.jsx)(c.u,{as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsxs)(u.v.Items,{className:"origin-top-right absolute right-0 mt-2 p-1 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:[(0,r.jsx)(u.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("button",{onClick:p,className:s()(t&&"bg-blue-50","w-full block px-4 py-2 text-sm text-left text-gray-500 rounded font-bold"),children:"\ud68c\uc6d0 \uc815\ubcf4 \uc218\uc815"})}}),(0,r.jsx)(u.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("a",{href:"/auth/password",className:s()(t&&"bg-blue-50","block px-4 py-2 text-sm text-gray-500 font-bold"),children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})}}),h&&(0,r.jsx)(u.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("a",{href:"/auth/users",className:s()(t&&"bg-blue-50","block px-4 py-2 text-sm text-gray-500 font-bold"),children:"\ud68c\uc6d0 \uad00\ub9ac"})}}),(0,r.jsx)(u.v.Item,{children:function(e){var t=e.active;return(0,r.jsx)("a",{href:"/auth/signOut",className:s()(t&&"bg-blue-50","block px-4 py-2 text-sm text-gray-500 font-bold"),children:"\ub85c\uadf8\uc544\uc6c3"})}})]})})]})]})}},4307:function(e,t,n){var r=n(5893),o=n(7294),a=n(5334),u=n(6087);t.Z=function(e){var t=e.title,n=e.children,c=(0,u.G)().data;return(0,r.jsxs)(o.Suspense,{fallback:(0,r.jsx)("div",{children:"\ub85c\ub529\uc911..."}),children:[(0,r.jsx)(a.Z,{user:c}),(0,r.jsx)("h2",{children:t}),n]})}},6087:function(e,t,n){n.d(t,{G:function(){return b}});var r=n(4051),o=n.n(r),a=n(7294),u=n(2649),c=n(2804),i={user:n(5825).K},s=n(6489),l=n(4988);function f(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,o)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}var p=function(){var e,t=(e=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://dev-brave-people.o-r.kr/admin/v1","/users/profile"),{method:"GET",headers:h({"Content-Type":"application/json",Authorization:s.parse(document.cookie).access_token},(0,l.P)())}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){f(a,r,o,u,c,"next",e)}function c(e){f(a,r,o,u,c,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],u=!0,c=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(i){c=!0,o=i}finally{try{u||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(){var e,t=y((0,c.FV)(i.user),2),n=t[0],r=t[1],s=(0,u.aM)(["fetchUsersProfile"],(e=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){v(a,r,o,u,c,"next",e)}function c(e){v(a,r,o,u,c,"throw",e)}u(void 0)}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),l=s.data,f=s.refetch;return(0,a.useEffect)((function(){!n.user_id&&l&&r(l)}),[]),{data:l,refetch:f}}},6976:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(4051),o=n.n(r),a=n(5893),u=n(2804),c=n(7294),i=n(1163),s=n(6489),l=n(4988);function f(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){f(a,r,o,u,c,"next",e)}function c(e){f(a,r,o,u,c,"throw",e)}u(void 0)}))}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var m=function(){var e=d(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,fetch("".concat("http://dev-brave-people.o-r.kr/admin/v1","/users/role"),{method:"POST",headers:p({"Content-Type":"application/json",Authorization:s.parse(document.cookie).access_token},(0,l.P)()),body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=d(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,fetch("".concat("http://dev-brave-people.o-r.kr/admin/v1","/users/role"),{method:"DELETE",headers:p({"Content-Type":"application/json",Authorization:s.parse(document.cookie).access_token},(0,l.P)()),body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=n(5825),b=n(2534),x=n(2419);function g(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){g(a,r,o,u,c,"next",e)}function c(e){g(a,r,o,u,c,"throw",e)}u(void 0)}))}}var w=function(){var e=(0,i.useRouter)(),t=(0,u.sJ)(y.U),n=t.roles.map((function(e){return e.code})),r=(0,c.useState)(new Set(n)),s=r[0],l=r[1];(0,c.useEffect)((function(){t.name||(alert("\ubcc0\uacbd\ud560 \uc0ac\uc6a9\uc790\ub97c \uba3c\uc800 \uc120\ud0dd\ud574\uc8fc\uc138\uc694!"),e.push("/auth/users",void 0,{shallow:!0}))}),[t]);var f=function(e){var t=new Set(s);e.target.checked?t.add(e.target.value):t.delete(e.target.value),l(t)};return(0,a.jsxs)("form",{onSubmit:function(r){r.preventDefault();var a=n.filter((function(e){return!s.has(e)})),u=Array.from(s).filter((function(e){return!n.includes(e)})),c=a.map(function(){var e=j(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({data:{role_code:n,user_id:t.user_id||""}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=u.map(function(){var e=j(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({data:{role_code:n,user_id:t.user_id||""}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([c,i]).then(j(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,alert("\uad8c\ud55c \ubd80\uc5ec\uc5d0 \uc131\uacf5\ud588\uc5b4\uc694! \uc720\uc800\ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4");case 2:return t.abrupt("return",e.push("/auth/users"));case 3:case"end":return t.stop()}}),t)})))).catch((function(e){return console.error("\uad8c\ud55c \ubd80\uc5ec\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694: ",e)}))},children:[(0,a.jsx)(x.Z,{type:"text",text:"\uc774\ub984",value:t.name,readonly:!0}),(0,a.jsx)(x.Z,{type:"text",text:"\uc544\uc774\ub514",value:t.user_id||"",readonly:!0}),(0,a.jsx)(x.Z,{type:"email",text:"\uc774\uba54\uc77c",value:t.email,readonly:!0}),(0,a.jsx)(x.Z,{type:"text",text:"\ud68c\uc6d0\uc720\ud615",value:(0,b.r)("auth_type"in t?t.auth_type:"NONE"),readonly:!0}),(0,a.jsx)("input",{id:"checkbox_admin",type:"checkbox",value:"ROLE_ADMIN",onChange:f,checked:s.has("ROLE_ADMIN")}),(0,a.jsx)("label",{htmlFor:"checkbox_admin",children:"\uad00\ub9ac\uc790"}),(0,a.jsx)("input",{id:"checkbox_admin",type:"checkbox",value:"ROLE_MANAGER",onChange:f,checked:s.has("ROLE_MANAGER")}),(0,a.jsx)("label",{htmlFor:"checkbox_admin",children:"\ub9e4\ub2c8\uc800"}),(0,a.jsx)("input",{id:"checkbox_admin",type:"checkbox",value:"ROLE_USER",onChange:f,checked:s.has("ROLE_USER")}),(0,a.jsx)("label",{htmlFor:"checkbox_admin",children:"\uc0ac\uc6a9\uc790"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("button",{type:"submit",className:"form__button form__button--center w-20 inline-flex items-center justify-center my-4 p-2 rounded-md text-white bg-blue-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:"\uacc4\uc815 \uc218\uc815"})})]})}},2419:function(e,t,n){var r=n(5893),o=n(7294),a=n(4184),u=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}t.Z=function(e){var t=e.text,n=e.value,a=e.onChange,c=e.type,s=void 0===c?"text":c,l=e.isRequired,f=void 0!==l&&l,d=e.readonly,h=void 0!==d&&d,p=e.disable,m=void 0!==p&&p,v=e.placeholder,y=e.customClass,b=e.children,x=(0,o.useId)();return(0,r.jsxs)("div",{className:"form__content__input",children:[t&&(0,r.jsxs)("label",{htmlFor:x,className:"form__content__title inline-block text-base font-medium text-gray-600",children:[t,f&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",i({id:x,type:s,value:n,onChange:a,required:f,readOnly:h,disabled:m},v&&{placeholder:v},{className:u()("appearance-none w-full h-10 border rounded border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",i({},y))})),b]})}},4988:function(e,t,n){n.d(t,{P:function(){return r}});var r=function(){return{APP_NAME:"SERVER_DEV",APP_TOKEN:"5f0196b4"}}},5825:function(e,t,n){n.d(t,{K:function(){return o},U:function(){return a}});var r=n(2804),o=(0,r.cn)({key:"USER_KEY",default:{user_id:"",roles:[],name:"",email:"",refetch:function(){return null}}}),a=(0,r.cn)({key:"SELECTED_USER_KEY",default:{auth_type:"NONE",create_dt:"",update_dt:"",email:"",name:"",roles:[],user_id:""}})},2534:function(e,t,n){n.d(t,{r:function(){return r}});var r=function(e){return"ADMIN"===e?"\uad00\ub9ac\uc790":"KAKAO"===e?"\uce74\uce74\uc624":"NAVER"===e?"\ub124\uc774\ubc84":"GOOGLE"===e?"\uad6c\uae00":"GITHUB"===e?"Github":""}},7049:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{K:function(){return u},R:function(){return a}});var a=function(e){return e.reduce((function(e,t){return"ROLE_ADMIN"===t.code?o(e).concat(["\uad00\ub9ac\uc790"]):"ROLE_MANAGER"===t.code?o(e).concat(["\ub9e4\ub2c8\uc800"]):"ROLE_USER"===t.code?o(e).concat(["\uc0ac\uc6a9\uc790"]):o(e)}),[])},u=function(e){return e&&e.filter((function(e){return"ROLE_ADMIN"===e.code}))}},2902:function(e,t,n){n.d(t,{Z:function(){return r},u:function(){return o}});var r=function(e,t){if(t)return Object.entries(t).forEach((function(t){return e.cookie="".concat(t[0],"=").concat(t[1],"; path=/;")}))},o=function(e,t){(function(e,t){return e.cookie.split(";").some((function(e){return e.trim().startsWith(t+"=")}))})(e,t)&&(e.cookie=t+"=; Max-Age=-99999999;path=/;")}}}]);